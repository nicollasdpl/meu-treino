<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Meu Treino</title>
  <link rel="stylesheet" href="estilo.css" />
  <!-- iOS ícone (opcional, se já tiver): -->
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />
  <!-- Manifest (opcional para Android/Chrome): -->
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <!-- TELA DE LOGIN (GUARDA) -->
  <section id="loginScreen" class="full-center hidden">
    <div class="login-card">
      <h1>🏋️ Meu Treino</h1>
      <p class="muted">Entre para sincronizar seus treinos na nuvem.</p>
      <button id="btnLoginGoogle" class="primary big">Entrar com Google</button>
      <p id="loginError" class="error"></p>
    </div>
  </section>

  <!-- APLICATIVO -->
  <header id="appHeader" class="hidden">
    <h1>🏋️ Meu Treino</h1>
    <p id="headerToday"></p>
    <div class="header-actions">
      <button id="btnNotify" class="small" title="Notificações">🔔</button>
      <button id="btnTheme"  class="small" title="Tema">🌙</button>
    </div>
  </header>

  <main id="appMain" class="hidden">
    <!-- HOME -->
    <section id="home" class="pagina">
      <div class="card status-row">
        <span id="firebaseStatus">Firebase…</span>
        <span> · </span>
        <span id="syncInfo">—</span>
        <div class="timer">
          <button id="btnTimer" class="primary">Iniciar</button>
          <span id="timer">00:00:00</span>
        </div>
      </div>

      <h2 class="toolbar">
        <button id="prevMes" class="ghost">◀</button>
        <span id="mesAno">mês/ano</span>
        <button id="proxMes" class="ghost">▶</button>
      </h2>

      <div class="semana-labels">
        <span>Dom</span><span>Seg</span><span>Ter</span><span>Qua</span><span>Qui</span><span>Sex</span><span>Sáb</span>
      </div>
      <div id="calendario" class="grid-cal"></div>

      <div class="resumo">
        <div class="card"><b>Dias treinados:</b> <span id="diasTreinadosMes">0</span></div>
        <div class="card"><b>Último treino:</b> <span id="ultimoTreino">—</span></div>
        <div class="card"><b>Duração média:</b> <span id="duracaoMedia">—</span></div>
      </div>
    </section>

    <!-- TREINO -->
    <section id="treino" class="pagina hidden">
      <div id="treinoHead" class="toolbar">
        <h2>Treino</h2>
        <div class="rest-controls">
          <input id="restSeg" type="number" value="60" min="10" step="5" />
          <button id="btnRest" class="ghost">Descanso</button>
          <span id="restDisplay" class="muted">—</span>
        </div>
      </div>

      <div class="tabs">
        <button class="tab-btn" data-dia="segunda">Seg</button>
        <button class="tab-btn" data-dia="terca">Ter</button>
        <button class="tab-btn" data-dia="quarta">Qua</button>
        <button class="tab-btn" data-dia="quinta">Qui</button>
        <button class="tab-btn" data-dia="sexta">Sex</button>
      </div>

      <p id="treinoDoDia" class="hint"></p>
      <div class="card">
        <button id="btnCopyLast" class="ghost">Copiar última sessão</button>
        <span id="statusSave" class="muted"></span>
      </div>

      <div id="listaExercicios"></div>

      <div class="card">
        <div id="resumoTonelagem" class="muted"></div>
        <button id="salvarTreino" class="success">Salvar sessão</button>
      </div>
    </section>

    <!-- EVOLUÇÃO (simplificada) -->
    <section id="graficos" class="pagina hidden">
      <h2>Evolução</h2>
      <div class="card grid-2">
        <div>
          <label class="small">Exercício</label>
          <select id="selectExercicio"></select>
        </div>
        <div>
          <label class="small">Período</label>
          <select id="periodo">
            <option value="30">30 dias</option>
            <option value="60">60 dias</option>
            <option value="90" selected>90 dias</option>
            <option value="180">180 dias</option>
          </select>
        </div>
      </div>

      <div class="card">
        <canvas id="chartCanvas" height="160"></canvas>
      </div>

      <div class="card">
        <canvas id="volumeCanvas" height="160"></canvas>
      </div>

      <div class="card">
        <h3>Últimas sessões</h3>
        <div id="listaSessoesDetalhe"></div>
      </div>
    </section>

    <!-- PERFIL -->
    <section id="perfil" class="pagina hidden">
      <h2>Perfil</h2>

      <div class="card profile">
        <img id="fotoPerfil" class="avatar" alt="foto" />
        <div>
          <div id="nomePerfil" class="strong">—</div>
          <div id="emailPerfil" class="muted small">—</div>
        </div>
        <button id="btnLogout" class="ghost" style="margin-left:auto">Sair</button>
      </div>

      <div class="card">
        <h3>Hábitos de hoje</h3>
        <div id="habitos" class="habits">
          <!-- criado via JS -->
        </div>
        <div class="muted small">Marcado = concluído (salva automaticamente).</div>
      </div>
    </section>
  </main>

  <!-- NAV -->
  <nav id="appNav" class="hidden">
    <button data-go="home">🏠</button>
    <button data-go="perfil">👤</button>
    <button data-go="treino">💪</button>
    <button data-go="graficos">📊</button>
  </nav>

  <!-- Overlay descanso -->
  <div id="restOverlay" class="overlay hidden">
    <div class="modal">
      <h3>⏰ Descanso finalizado!</h3>
      <p>Pronto para a próxima série.</p>
      <div class="stack">
        <button id="btnOverlayOk" class="primary">OK</button>
        <button id="btnOverlayBuzz" class="ghost">Vibrar/Beep de novo</button>
      </div>
    </div>
  </div>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- app -->
  <script type="module" src="app.js"></script>
</body>
</html>
